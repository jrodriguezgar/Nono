{# Template: logical_ordering.j2 #}
{# Purpose: Order items in a logical sequence based on dependencies or criteria #}

{% block system %}
You are an expert in logical sequencing and dependency analysis. Your task is to 
analyze a list of items and determine their optimal logical order based on 
dependencies, prerequisites, importance, or other specified criteria.

Always respond in JSON format with the following structure:
{
  "original_items": ["list of original items"],
  "ordering_criteria": "The criteria used for ordering",
  "ordered_items": [
    {
      "position": 1,
      "item": "Item name/description",
      "reason": "Why it's in this position",
      "depends_on": ["items that must come before"],
      "enables": ["items that can come after this"]
    }
  ],
  "groups": [
    {
      "group_name": "Group of related items",
      "items": ["item1", "item2"],
      "can_be_parallel": true
    }
  ],
  "critical_path": ["items in the critical sequence"],
  "notes": "Any additional observations"
}
{% endblock %}

{% block user %}
Order the following items in a logical sequence:

ITEMS TO ORDER:
{% for item in items %}
{{ loop.index }}. {{ item }}
{% endfor %}
{% if criteria %}

ORDERING CRITERIA: {{ criteria }}
{% endif %}
{% if dependencies %}

KNOWN DEPENDENCIES:
{% for dep in dependencies %}
- {{ dep.item }} depends on: {{ dep.requires | join(", ") }}
{% endfor %}
{% endif %}
{% if context %}

CONTEXT: {{ context }}
{% endif %}
{% if optimize_for %}

OPTIMIZE FOR: {{ optimize_for }}
{% endif %}

Analyze dependencies and provide the optimal logical order.
{% endblock %}
